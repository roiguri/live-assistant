<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="header">
    <h2>Live Assistant</h2>
    <p>Configure your AI assistant settings</p>
  </div>

  <!-- Tab Navigation -->
  <div class="tabs">
    <button class="tab active" data-tab="general">General</button>
    <button class="tab" data-tab="prompts">Prompts</button>
  </div>

  <!-- General Settings Tab -->
  <div class="tab-content active" data-content="general">
    <form id="settingsForm">
      <div class="form-group">
        <label for="chatVisible">Chat Interface</label>
        <div class="toggle-container">
          <input type="checkbox" id="chatVisible" class="toggle-checkbox">
          <label for="chatVisible" class="toggle-label">
            <span class="toggle-slider"></span>
          </label>
          <span class="toggle-text">Show chat on websites</span>
        </div>
      </div>

      <div class="form-group">
        <label for="chatPosition">Chat Position</label>
        <select id="chatPosition" class="loading">
          <option value="" disabled selected hidden>Loading...</option>
          <option value="bottom-right">Bottom Right</option>
          <option value="bottom-center">Bottom Center</option>
          <option value="bottom-left">Bottom Left</option>
          <option value="top-right">Top Right</option>
          <option value="top-center">Top Center</option>
          <option value="top-left">Top Left</option>
        </select>
      </div>

      <div class="form-group">
        <label for="modelSelection">Gemini Model</label>
        <select id="modelSelection" class="loading">
          <option value="" disabled selected hidden>Loading...</option>
          <option value="gemini-2.0-flash-live-001">Gemini 2.0 Flash Live</option>
          <option value="gemini-live-2.5-flash-preview">Gemini Live 2.5 Flash Preview</option>
        </select>
        <div class="help-text">
          <strong>Note:</strong> Changing the model will clear your current conversation history and reconnect with the new model.
        </div>
        <button type="button" id="saveModelBtn" class="btn-primary model-save-btn" disabled>
          Save Model Selection
        </button>
      </div>

      <div class="form-group">
        <label for="apiKey">Gemini API Key</label>
        <input type="password" id="apiKey" placeholder="Enter your Gemini API key">
        <div class="help-text">
          Get your API key from <a href="https://aistudio.google.com/" target="_blank" class="api-link">Google AI Studio</a>
        </div>
      </div>
      
      <div class="button-group">
        <button type="button" id="testBtn" class="btn-secondary">Test</button>
        <button type="submit" id="saveBtn" class="btn-primary">Save</button>
      </div>
    </form>
  </div>

  <!-- Prompts Tab -->
  <div class="tab-content" data-content="prompts">
    <div class="form-group">
      <label for="customInstructions">Custom Instructions</label>
      <textarea 
        id="customInstructions" 
        placeholder="Add custom instructions for the AI assistant..."
        maxlength="2000"
        rows="4"
      ></textarea>
      <div class="char-counter" id="charCounter">0 / 2000</div>
      <div class="help-text">
        These instructions will be added to customize the AI's behavior.
      </div>
    </div>
    
    <div class="button-group">
      <button type="button" id="clearInstructions" class="btn-secondary">Clear</button>
      <button type="button" id="saveInstructions" class="btn-primary">Save</button>
    </div>
  </div>
  
  <div id="status" class="status" style="display: none;"></div>
  
  <script src="prompt-manager-popup.js"></script>
  <script src="popup.js"></script>
</body>
</html>